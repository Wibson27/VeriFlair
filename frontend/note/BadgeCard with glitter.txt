// BadgeCard with glitter

import React from 'react';
import Atropos from 'atropos/react';
import 'atropos/css';

const BadgeCard = ({ 
  id,
  username, 
  rank, 
  points, 
  frameSrc, 
  badgeSrc, 
  rankBgSrc, 
  className = "",
  glowClass = "",
  sizeClass = "" // Tambahkan prop baru ini dengan nilai default
}) => {
  
  return (
    <Atropos
      className={`relative w-44 aspect-[3/4] rounded-2xl ${className}`}
      activeOffset={40}
      shadowScale={1.05}
      shadow={false}
    >
      <div className="w-full h-full overflow-hidden rounded-2xl bg-transparent">
        
        <img 
          src={frameSrc} 
          alt="Card Frame" 
          className={`relative w-full h-full object-cover z-10 rounded-2xl ${glowClass}`}
          data-atropos-offset="0" // Frame dibuat tidak bergerak dalam ruang 3D
        />

        {/* PERBAIKAN (FRAME): Mengurangi offset badge agar tidak mendorong frame keluar */}
        <div className="absolute inset-x-0 top-8 flex justify-center z-30" data-atropos-offset="2">
          <img 
            src={badgeSrc} 
            alt="Skill Badge" 
            className="w-2/3"
          />
        </div>

        {/* PERBAIKAN (BURAM): Offset di-nol-kan agar teks tidak ikut transformasi 3D secara berlebihan */}
        <div 
          className="absolute bottom-[3.5rem] w-full text-center z-30"
          data-atropos-offset="0"
        >
          <p className="text-white text-xl font-semibold">{username}</p>
          <p className="text-gray-300 text-xl font-normal">{rank}</p>
        </div>

        {/* PERBAIKAN (BURAM): Offset di-nol-kan agar teks dan background-nya rata */}
        <div className="absolute inset-x-0 bottom-[1rem] flex justify-center items-center z-30" data-atropos-offset="0">
          <img 
            src={rankBgSrc} 
            alt="Rank Background" 
            className="w-[4.5rem]" 
          />
          <div className="absolute text-xl text-black font-semibold">
            {points}
          </div>
        </div>
        
        <div 
          className="absolute top-0 left-0 w-full h-full z-20 
                     bg-gradient-to-r from-transparent via-white/20 to-transparent
                     animate-shimmer"
          style={{
            animationDelay: `${(id % 5) * 0.7}s` 
          }}
          data-atropos-offset="0"
        ></div>

      </div>
    </Atropos>
  );
};

export default BadgeCard;